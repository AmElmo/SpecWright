# Implement logout functionality

**Issue ID**: ENG-010  
**Status**: pending  
**Priority**: medium  
**Category**: backend  
**Complexity Score**: 3/10  
**Estimated Hours**: 2h  
**Complexity Reasoning**: Straightforward session and cache cleanup

> **Status Options**: `pending` (not started) | `in-review` (AI completed, needs human review) | `approved` (human verified)

## Description

Create logout endpoint that invalidates the user's session, clears Redis cache, and revokes authentication tokens.

## Technical Details

Endpoint: `POST /auth/logout`

Flow:
1. Validate user session
2. Delete session from Redis
3. Clear session cookie
4. Optional: Revoke Google OAuth token
5. Return success response

```typescript
app.post('/auth/logout', async (req, res) => {
  const sessionId = req.sessionID;
  
  // Delete from Redis
  await redisClient.del(`sess:${sessionId}`);
  
  // Destroy session
  req.session.destroy((err) => {
    if (err) {
      return res.status(500).json({ error: 'Logout failed' });
    }
    
    res.clearCookie('connect.sid');
    res.json({ message: 'Logged out successfully' });
  });
});
```

## Dependencies

- **ENG-004**: Requires OAuth implementation with session management

## Acceptance Criteria

- [ ] POST /auth/logout endpoint created
- [ ] Session deleted from Redis
- [ ] Session cookie cleared from browser
- [ ] User can't access protected resources after logout
- [ ] Proper error handling
- [ ] Frontend logout button triggers endpoint
- [ ] Logout works from any page

## Test Strategy

### Automated Tests

- Authenticated user can logout
- Session removed from Redis after logout
- Cookie cleared from response
- Unauthenticated requests to logout handled gracefully
- Multiple logout calls don't cause errors

### Manual Verification (Human-in-the-Loop)

1. Log in and verify session exists in Redis
2. Click logout button
3. Verify session removed from Redis
4. Try accessing protected route (should fail)
5. Verify cookie cleared in browser
6. Verify can log in again

## Subtasks

1. Create logout endpoint
2. Implement session destruction logic
3. Clear Redis cache
4. Clear cookies
5. Add frontend logout button
6. Test logout from various pages
7. Handle edge cases

---

**Notes**: Consider implementing OAuth token revocation for better security. Add logout event to audit log if implementing activity tracking.




